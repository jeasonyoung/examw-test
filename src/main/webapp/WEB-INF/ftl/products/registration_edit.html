<#--科目设置编辑--> <#include "comm.ftl"/> <#assign
module="products_registration"/> <#assign form="${module}_edit_form"/>
<script type="text/javascript">
<!--
	$(function() {
		var current_category_select = 0;
		//分类树
		//category__exam_tree
		var c_t = $("#${module}_edit_form input[name='examId']").combotree(
				{
					url : "<@s.url '/settings/category/exams-tree'/>",
					required : true,
					valueField : "id",
					textField : "name",
					onLoadError : function(e) {
						<@error_dialog "e"/>
					},
					onLoadSuccess : function() {
						var id = "${CURRENT_EXAM_ID}";
						if ($.trim(id) == "")
							return;
						c_t.combotree("setValue", id);
					},
					onSelect : function(record) {
						current_category_select = current_category_select + 1;
						if (current_category_select == 1
								&& "${CURRENT_EXAM_ID}" == record.id)
							return;
						if (p_t) {
							p_t.combobox("clear");
							p_t.combobox("reload",
									"<@s.url '/products/product/combo'/>?examId="
											+ record.id);
						}
					}
				});
		//产品下拉
		//product_tree
		var p_t = $("#${module}_edit_form input[name='productId']")
				.combobox(
						{
							url : "<@s.url '/products/product/combo'/>?examId=${CURRENT_EXAM_ID}",
							required : true,
							valueField : "id",
							textField : "name",
							onLoadError : function(e) {
								<@error_dialog "e"/>
							},
							onLoadSuccess : function() {
								var id = "${CURRENT_PRODUCT_ID}";
								if ($.trim(id) == "")
									return;
								p_t.combobox("setValue", id);
							}
						});
		//渠道下拉
		var ch_t = $("#${module}_edit_form input[name='channelId']").combobox({
			url : "<@s.url '/products/channel/combo'/>",
			valueField : "id",
			textField : "name",
			onLoadError : function(e) {
				<@error_dialog "e"/>
			},
			onLoadSuccess : function() {
				var id = "${CURRENT_CHANNEL_ID}";
				if ($.trim(id) == "")
					return;
				ch_t.combobox("setValue", id);
			}
		});
		//软件类型下拉
		var r_t = $("#${module}_edit_form input[name='softTypeId']").combobox({
			url : "<@s.url '/products/softwaretype/combo'/>",
			valueField : "id",
			textField : "name",
			onLoadError : function(e) {
				<@error_dialog "e"/>
			},
			onLoadSuccess : function() {
				var id = "${CURRENT_TYPE_ID}";
				if ($.trim(id) == "")
					return;
				r_t.combobox("setValue", id);
			}
		});
	});
//-->
</script>

<form id="${module}_edit_form" method="POST" style="padding: 10px;">
		<div style="float: left;">
			<label style="width: 100px;">关联产品：</label> 
			<input type="text"	name="name" class="easyui-validatebox" style="width: 270px;" data-options="required:true" /> 
			<input type="hidden" name="id" />
		</div>
		<div style="float: left; margin-top: 12px;">
			<label style="width: 100px;">期限(月)：</label> 
			<input name="limitTime" class="easyui-numberbox" data-options="editable:true,min:0" style="width: 274px;" />
		</div>
		<div style="float: left; margin-top: 12px;">
			<label style="width: 100px;">渠道：</label> 
			<input name="channelId"	id="${module}_channel_combobox" style="width: 274px;" />
		</div>
		<div style="float: left; margin-top: 12px;">
			<label style="width: 100px;">代码：</label> 
			<input type="text"	name="code" class="easyui-validatebox" style="width: 270px;" data-options="required:true" />
		</div>
		<div style="float: left; margin-top: 12px;">
			<label style="width: 100px;">原价：</label> 
			<input type="text"	name="price" class="easyui-numberbox" data-options="editable:true,min:0,precision:2"	style="width: 274px;" />
		</div>
		<div style="float: left; margin-top: 12px;">
			<label style="width: 100px;">优惠价：</label>
			<input type="text" name="discount" class="easyui-numberbox" data-options="editable:true,min:0,precision:2"	style="width: 270px;" />
		</div>
		<div style="float: left; margin-top: 12px;">
			<label style="width: 100px;">到期时间：</label>
			<input type="text" name="endTime" class="easyui-datebox" data-options="panelWidth:270"	style="width: 270px;" />
		</div>
</form>
