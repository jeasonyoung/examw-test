<#--科目设置编辑-->
<#include "comm.ftl"/>
<#assign module="settings_subject"/>
<script type="text/javascript">
<!--
$(function(){
	//考试类别。
	var catalog_cbt = $("#${module}_edit_form input[name='categoryId']").combotree({
		url:"<@s.url '/settings/category/tree'/>",
		required:true,
		valueField:"id",
		textField:"name",
		onLoadError:function(e){
			<@error_dialog "e"/>
		},
		onChange:function(n,o){
			if(area_cbb){
				area_cbb.combobox("clear");
				area_cbb.combobox("reload","<@s.url '/settings/exam/areas'/>?examId=");
			}
			if(exam_cbb){
				exam_cbb.combobox("clear");
				exam_cbb.combobox("reload","<@s.url '/settings/exam/all'/>?categoryId=" + n);
			}
		}
	});
	//类别下的考试。
	var exam_cbb = $("#${module}_edit_form input[name='examId']").combobox({
		url:"<@s.url '/settings/exam/all'/>?categoryId=${CURRENT_CATEGORY_ID}",
		required:true,
		valueField:"id",
		textField:"name",
		onLoadError:function(e){
			<@error_dialog "e"/>
		},
		onChange:function(n,o){
			if(area_cbb){
				area_cbb.combobox("clear");
				area_cbb.combobox("reload","<@s.url '/settings/exam/areas'/>?examId=" + n);
			}
		}
	});
	//所在地区。
	var area_cbb = $("#${module}_edit_form input[name='areaId']").combobox({
		url:"<@s.url '/settings/exam/areas'/>?examId=${CURRENT_EXAM_ID}",
		valueField:"id",
		textField:"name",
		onLoadError:function(e){
			<@error_dialog "e"/>
		},
		icons:[{
			iconCls:"icon-clear",
			handler:function(e){
				$(e.data.target).combobox("clear");
			}
		}]
	});
});
//-->
</script>

<form id="${module}_edit_form" method="POST" style="padding:10px;">
	<div style="float:left;margin-top:2px;width:100%;">
		<label style="width:75px;">所属考试：</label>
		<input type="text" name="categoryId" style="width:198px;"/>
		<input type="text" name="examId" style="width:168px;"/>
	</div>
	<div style="float:left;margin-top:12px;width:100%;">
		<label style="width:75px;">科目代码：</label>
		<input type="text" name="code" class="easyui-numberbox" style="width:198px;" data-options="required:true"/>
		<input type="hidden" name="id"/>
	</div>
	<div style="float:left;margin-top:12px;width:100%;">
		<label style="width:75px;">科目名称：</label>
		<input type="text" name="name" class="easyui-validatebox" style="width:368px;" data-options="required:true"/>
	</div>
	<div style="float:left;margin-top:12px;width:100%;">
		<label style="width:75px;">地区：</label>
		<input name="areaId" style="width:372px;"/>
	</div>
</form>