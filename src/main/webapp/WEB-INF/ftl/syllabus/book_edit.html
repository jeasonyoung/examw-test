<#--教材编辑-->
<#include "comm.ftl"/>
<#assign module="syllabus_textbook"/>
<#assign form="${module}_edit_form"/>
<script type="text/javascript">
<!--
$(function(){
	//exam
	var exam_cbt = $("#${form} input[name='examId']").combotree({
		url:"<@s.url '/settings/category/exams-tree'/>",
		required:true,
		lines:true,
		onLoadError:function(e){
			<@error_dialog "e"/>
		},
		onLoadSuccess:function(n,d){
			<#if (CURRENT_EXAM_ID?length > 0)>
			if(exam_cbt)exam_cbt.combotree("setValue","${CURRENT_EXAM_ID}");
			</#if>
		},
		onChange:function(n,o){
			if(sub_cbb){
				sub_cbb.combobox("clear");
				if($.trim(n) == "") return;
				sub_cbb.combobox("reload","<@s.url '/settings/subject/alls?examId='/>" + n);
			}
		}
	});
	//subject
	var sub_cbb = $("#${form} input[name='subId']").combobox({
		<#if (CURRENT_EXAM_ID?length > 0)>
		url:"<@s.url '/settings/subject/alls?examId=${CURRENT_EXAM_ID}'/>",
		</#if>
		valueField:"id",
		textField:"name",
		required:true,
		onLoadError:function(e){
			<@error_dialog "e"/>
		},
	});
});
//-->
</script>
<form id="${form}" method="POST" style="padding:10px;">
	<div style="float:left;margin-top:12px;width:100%;">
		<label style="width:75px;">所属科目：</label>
		<input type="text" name="examId" style="width:154px;"/>
		<input type="text" name="subId" style="width:160px;"/>
		<input type="hidden" name="id">
	</div> 
	<div style="float:left;margin-top:12px;width:100%;">
		<label style="width:75px;">所属出版社：</label>
		<input type="text" name="pressId" class="easyui-combobox" data-options="
			url:'<@s.url '/syllabus/press/all'/>',
			valueField:'id',
			textField:'name',
			multiple:false,
			required:true,
			onLoadError:function(e){
				<@error_dialog 'e'/>
			}
		" style="width:320px;">
	</div>
	<div style="float:left; margin-top:12px; width:100%;">
		<label style="width:75px;">教材名称：</label>
		<input type="text" name="name" class="easyui-validatebox"  data-options="required:true" style="width:315px;"/>
	</div>
	<div style="float:left; margin-top:12px; width:100%;">
		<label style="width:75px;">教材价格：</label>
		<input type="text" name="price" class="easyui-validatebox"  data-options="required:true" style="width:315px;"/>
	</div>
</form>